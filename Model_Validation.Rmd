---
title: "Model Validation"
author: "Xing Song"
date: "11/02/2020"
output: html_document
---

Let's do some preparation for the class by running the following chunk of codes

```{r setup}
#set up rmd 
knitr::opts_chunk$set(message=F,
                      warning=F,
                      echo=F,
                      fig.width=12,
                      fig.height=10,
                      fig.path= "fig&tbl/",
                      dev="png")

#load packages
pacman::p_load(tidyverse,GGally,pROC,PRROC)

#load data
idd_bmi<-readRDS("./idd_bmi_final.rda")
```

**************************************************************************************************
**************************************************************************************************

Let's recall the logistical model we built last time to answer the research question:

> To estimate if bmi is a risk factor for developing obstructive sleep apnea (OSA) among adult IDD patients

We built two logistic regression models, with different set of predictors: 

```{r}
fit1<-glm(OSA_ind ~ bmi_median, data=idd_bmi, family=binomial())
summary(fit1)
```


```{r}
fit2<-glm(OSA_ind ~ bmi_median+AGE_AT_FIRSTDX, data=idd_bmi, family=binomial())
summary(fit2)

anova(fit1,fit2,test="Chisq")
```

What happens if we add `sex_f_ind` to the model? 

```{r}
fit3<-glm(OSA_ind ~ bmi_median+AGE_AT_FIRSTDX+sex_f_ind, data=idd_bmi, family=binomial())
summary(fit3)

anova(fit2,fit3,test="Chisq")
```

Should we keep `sex_f_ind` in the final model, then? Should we add other covariates to the model in order to achieve better performance? 



